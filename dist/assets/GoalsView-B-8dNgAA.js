import"./vue-BoLrSUi8.js";import{_ as J,b as ne}from"./index-C-24_XjJ.js";import{r as w,a as d,f as v,D as N,v as z,j as t,m as h,A as r,H as y,N as fe,g as b,F as A,s as q,M as D,E as B,J as V,B as te,a2 as se,x as ge,ab as ye,k as he,$ as be,b as we,w as oe,ac as xe,O as _e,a9 as ke}from"./@vue-CoJfA1qg.js";import{_ as Se}from"./v-calendar-CD4qQxjj.js";import{D as j}from"./luxon-C_0L_ju9.js";import"./@vuepic-C0WgiITr.js";import"./tailwindcss-DTnOEpPf.js";import{s as $e,t as Oe,u as ae,v as Ce,w as le,x as De,y as Ie}from"./@heroicons-Doi4At8W.js";import{c as Ne}from"./@vueuse-XJ5467UB.js";import{Q as Te,G as je,b as Je,c as Ue,J as ze}from"./@headlessui-BE6jzHzZ.js";import"./pinia-CqAf_HDh.js";import"./vue3-google-signin-CqEKSxfA.js";import"./vue-router-BJR6PFrN.js";import"./jose-Deqv1zAq.js";import"./jwt-decode-Bpt2EmM4.js";import"./axios-COvgDtyF.js";import"./@popperjs-DXqTHVUr.js";import"./date-fns-Bg6d8ij9.js";import"./@babel-C82FMKWV.js";import"./picocolors-CBpy9uNM.js";const Re={class:"relative mt-1"},Ae={__name:"DropDown",props:{options:Array,currentOption:String,placeholder:String,disabled:{type:Boolean,required:!1,default:!1},shadow:{type:Boolean,required:!1,default:!1}},setup(e){const a=e,s=w(""),i=w(a.currentOption),g=d(()=>s.value===""?a.options:a.options.filter(p=>p?.name.toLowerCase().includes(s.value.toLowerCase())));return(p,u)=>(v(),N(r(ze),{as:"div",modelValue:i.value,"onUpdate:modelValue":[u[1]||(u[1]=c=>i.value=c),u[2]||(u[2]=c=>p.$emit("update:currentOption",c))],disabled:e.disabled},{default:z(()=>[t("div",Re,[h(r(Te),{class:"w-full rounded-md border-0 bg-white py-1.5 pl-3 pr-10 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onChange:u[0]||(u[0]=c=>s.value=c.target.value),"display-value":c=>c,placeholder:e.placeholder},null,8,["display-value","placeholder"]),h(r(je),{class:y(["absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none"])},{default:z(()=>[h(r($e),{class:"h-5 w-5 text-slate-400","aria-hidden":"true"})]),_:1}),h(fe,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:z(()=>[g.value.length>0?(v(),N(r(Je),{key:0,class:y(["absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"])},{default:z(()=>[(v(!0),b(A,null,q(g.value,(c,U)=>(v(),N(r(Ue),{key:U,value:c,as:"template"},{default:z(({active:k,selected:S})=>[t("li",{class:y([k?"bg-indigo-600 text-white":"text-slate-900","relative cursor-default select-none py-2 pl-8 pr-4"])},[t("span",{class:y(["block truncate",S&&"font-semibold"])},D(c.name),3),S?(v(),b("span",{key:0,class:y([k?"text-white":"text-indigo-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[h(r(Oe),{class:"h-5 w-5","aria-hidden":"true"})],2)):B("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):B("",!0)]),_:1})])]),_:1},8,["modelValue","disabled"]))}},E=J(Ae,[["__file","/Users/jason/Documents/Code/sourcery-dashboard/src/components/DropDown.vue"]]),Ge="https://api.plethora7.com/api",Pe=(e={})=>Object.entries(e).map(([a,s])=>`${encodeURIComponent(a)}=${encodeURIComponent(JSON.stringify(s))}`).sort().join("&"),qe=({section:e,action:a,query:s})=>`${Ge}/${e}/${a}?${s}`;function K(){return{runQuery:async({section:a,action:s,params:i,method:g="GET"})=>{const p=qe({section:a,action:s,query:Pe(i)}),u={method:g,headers:{"Content-Type":"application/json","x-api-key":"c3cada64b1f7fd29c0dce2f04f8752dc358fc60222498c77fd9514269278404ec8cdfd8929d7250b92a28d00ed28f4cd53b3b8f24e17e1acf1c3b8c1ea776db2"}};try{let c=await fetch(p,u);if(c=await c.json(),c.success)return c.data;throw new Error(c)}catch(c){return console.log(JSON.stringify(c.message,null,2)),[]}}}}const X=new WebSocket("wss://api.plethora7.com");X.addEventListener("open",()=>console.log("Connected to websocket"));X.addEventListener("message",({data:e})=>{e=JSON.parse(e),e.type==="goals"&&(L.value=e.content,W({type:"info",title:"There Has Been a Change!",message:"Another user has updated goals.",autoClose:!0,duration:10}))});const{runQuery:re}=K(),{createNotification:W}=ne(),L=w([]),Be=async()=>{X.send(JSON.stringify({type:"goals",content:L.value}))},ie=async()=>{try{const e=await re({section:"goals",action:"getGoals"});L.value=e}catch(e){console.log(e)}};ie();const Le=async e=>{try{const a=await re({section:"goals",action:"setGoal",params:e,method:"POST"});await ie(),Be(),W({type:"success",title:"Successfully Saved!",message:`The goal for ${e.sku} (${e.asin}) has been saved.`,autoClose:!0,duration:5})}catch{W({type:"error",title:"Yikes!",message:"Something went wrong saving the goals.",autoClose:!0,duration:5})}};function ue(){const e=w(null),a=w(null),s=({sku:p,asin:u})=>{e.value=p,a.value=u},i=p=>{try{Le(p)}catch(u){console.log(u)}},g=d(()=>L.value.find(p=>p.sku===e.value&&p.asin===a.value)?.goal||0);return{goals:d(()=>L.value),goal:g,setGoalProperties:s,setGoal:i}}const R=w({timezone:"America/Los_Angeles",config:{start:{timeAdjust:"00:00:00"},end:{timeAdjust:"23:59:59.999"}}}),C={last:e=>({start:j.now().setZone(R.value.timezone,{keepLocalTime:!0}).minus({[`${e}s`]:1}).startOf(e).toISO(),end:j.now().setZone(R.value.timezone,{keepLocalTime:!0}).minus({[`${e}s`]:1}).endOf(e).toISO()}),this:e=>({start:j.now().setZone(R.value.timezone,{keepLocalTime:!0}).startOf(e).toISO(),end:j.now().setZone(R.value.timezone,{keepLocalTime:!0}).endOf("day").toISO()})},ce=()=>{const e=[{name:"Weekly",value:"week"},{name:"Monthly",value:"month"}];[...Array(4).keys()].reduce((i,g)=>{const p=j.fromJSDate(new Date,{zone:R.value.timezone,keepLocalTime:!0}).startOf("year").plus({quarter:g}),u=p.endOf("quarter");return i.push({name:`Q${g+1}`,value:JSON.stringify({start:p.toISO(),end:u.toISO()})}),i},[]);const a=[{name:"Today",value:JSON.stringify(C.this("day"))},{name:"Yesterday",value:JSON.stringify(C.last("day"))},{name:"This Week",value:JSON.stringify(C.this("week"))},{name:"Last Week",value:JSON.stringify(C.last("week"))},{name:"This Month",value:JSON.stringify(C.this("month"))},{name:"Last Month",value:JSON.stringify(C.last("month"))},{name:"This Quarter",value:JSON.stringify(C.this("quarter"))},{name:"Last Quarter",value:JSON.stringify(C.last("quarter"))},{name:"This Year",value:JSON.stringify(C.this("year"))},{name:"Last Year",value:JSON.stringify(C.last("year"))}],s=[{name:"No Comparisons",value:null},{name:"Previous Period",value:"period"},{name:"Previous Year",value:"year"}];return{timezone:d(()=>R.value.timezone),config:d(()=>R.value.config),views:e,presets:a,comparisons:s}},Z=[{name:"Weekly",value:"week",intervalsPerYear:52},{name:"Monthly",value:"month",intervalsPerYear:12}],Q=w(Z.find(e=>e.value==="month")),Me=()=>{localStorage.getItem("timeInterval")!==null&&(Q.value=JSON.parse(localStorage.getItem("timeInterval")))};Me();const Qe=()=>localStorage.setItem("timeInterval",JSON.stringify(Q.value));function ee(){const e=a=>{try{Q.value=Z.find(s=>s.value===a),Qe()}catch(s){console.log(s)}};return{timeInterval:d(()=>Q.value),timeIntervalOptions:d(()=>Z),setTimeInterval:e}}const Ye=["onClick"],Fe={class:"relative flex flex-grow items-stretch"},Ve=["value"],Ee={class:"relative flex flex-grow items-stretch"},We=["value"],Ze={class:"flex items-stretch justify-between space-x-2 border-t border-gray-100 px-2 py-4"},He={class:"flex items-stretch justify-end space-x-2 px-2 pb-4"},Ke=["onClick"],Xe=["disabled"],et={__name:"DatePicker",props:{initialRange:Object,view:String,disabled:{type:Boolean,required:!1,default:!1}},emits:["update","update:initialRange","update:view","update:comparison"],setup(e,{emit:a}){const s=e,{timezone:i,config:g,views:p,presets:u}=ce(),{setTimeInterval:c,timeIntervalOptions:U,timeInterval:k}=ee(),S=w(s.initialRange),I=w(null),_=w(null),$=O=>{O={...{mode:"select",value:""},...O};let{mode:l,value:n}=O;n=typeof n=="object"?n:JSON.parse(n),l==="preset"&&_.value.move(n.start),n=Object.keys(n).reduce((m,f)=>({...m,[f]:j.fromJSDate(new Date(n[f])).setZone(i.value).toISO()}),{}),I.value=JSON.stringify(n),S.value=n},T=()=>{a("update:initialRange",S.value)},G=()=>{$({mode:"select",value:s.initialRange}),_.value.hidePopover()},x={highlight:{start:{fillMode:"solid",contentClass:"bg-indigo-500 hover:bg-indigo-500 focus:bg-indigo-500"},base:{class:"bg-indigo-100"},end:{fillMode:"solid",contentClass:"bg-indigo-500 hover:bg-indigo-500 focus:bg-indigo-500"}}};return(O,o)=>(v(),N(r(Se),{"model-value":S.value,"onUpdate:modelValue":o[3]||(o[3]=l=>$({mode:"select",value:l})),"model-config":r(g),"is-range":"",timezone:r(i),ref_key:"calendar",ref:_,columns:2,transition:"slide-h","max-date":new Date,popover:{keepVisibleOnInput:!0,visibility:"click"},"select-attribute":x,"drag-attribute":x},{default:z(({inputValue:l,inputEvents:n,togglePopover:m})=>[t("div",{class:"flex items-stretch justify-center text-slate-400 focus-within:text-slate-500",onClick:V(f=>m(),["stop"])},[t("div",Fe,[h(r(ae),{class:"absolute inset-y-0 left-0 z-10 ml-2 mr-6 h-full w-4 text-slate-400"}),t("input",te({value:l.start},se(n.start,!0),{class:["appearance-none rounded-md border border-transparent py-2 pl-8 pr-2 text-center focus:outline-none sm:text-sm","shadow-md"]}),null,16,Ve)]),h(r(Ce),{class:"mx-2 h-auto w-4 flex-grow-0 align-middle"}),t("div",Ee,[h(r(ae),{class:"absolute inset-y-0 left-0 z-10 ml-2 mr-6 h-full w-4 text-slate-400"}),t("input",te({value:l.end},se(n.end,!0),{class:["appearance-none rounded-md border border-transparent py-2 pl-8 pr-2 text-center focus:outline-none sm:text-sm","shadow-md"]}),null,16,We)])],8,Ye)]),footer:z(()=>[t("div",Ze,[h(E,{options:r(u),"current-option":I.value,"onUpdate:currentOption":[o[0]||(o[0]=l=>I.value=l),o[1]||(o[1]=l=>$({mode:"preset",value:l}))],placeholder:"Custom Range",position:"left-0",width:"w-full",class:"w-full rounded-md border border-gray-100"},null,8,["options","current-option"]),h(E,{"current-option":r(k).value,"onUpdate:currentOption":[o[2]||(o[2]=l=>r(k).value=l),r(c)],options:r(U),position:"left-0",width:"w-full",class:"w-full rounded-md border border-gray-100"},null,8,["current-option","options","onUpdate:currentOption"])]),t("div",He,[t("button",{class:y(["rounded border border-transparent px-4 py-2 text-slate-500 focus:border-gray-300 focus:outline-none","disabled:cursor-not-allowed disabled:opacity-50"]),onClick:V(G,["stop"])}," Cancel ",8,Ke),t("button",{disabled:e.disabled,class:y(["rounded border border-transparent px-4 py-2 font-medium text-indigo-600 transition hover:bg-indigo-600 hover:text-white focus:border-indigo-600 focus:outline-none","disabled:cursor-not-allowed disabled:opacity-50"]),onClick:T}," Apply ",8,Xe)])]),_:1},8,["model-value","model-config","timezone","max-date"]))}},tt=J(et,[["__file","/Users/jason/Documents/Code/sourcery-dashboard/src/components/DatePicker.vue"]]),M={currency:e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),number:e=>new Intl.NumberFormat("en-US").format(e)},st=t("header",{class:"h-12 border-b border-gray-300 bg-slate-50"},null,-1),at={class:"flex w-1/4 items-center space-x-4 py-4"},nt={class:"h-24 w-24 rounded-md bg-slate-200 p-2"},ot=ye('<div class="flex-grow space-y-2"><div class="grid w-full grid-cols-4 items-center gap-2"><div class="col-span-4 h-3 rounded-full bg-slate-200"></div></div><div class="grid w-full grid-cols-4 items-center gap-2"><div class="col-span-2 h-3 rounded-full bg-slate-200"></div><div class="col-span-1 h-3 rounded-full bg-slate-200"></div></div></div>',1),lt={class:"ml-8 flex flex-grow flex-col justify-center py-4"},rt={class:"grid grid-cols-5 items-center gap-2"},it={class:"flex flex-col items-center space-y-3"},ut=t("div",{class:"flex space-x-3"},[t("div",{class:"h-3 w-3 rounded-full bg-slate-200"}),t("div",{class:"h-3 w-12 rounded-full bg-slate-200"})],-1),ct=t("div",{class:"h-3 w-24 rounded-full bg-slate-200"},null,-1),dt=[ut,ct],mt={__name:"SkuTableSkeleton",props:{pulse:{type:Boolean,default:!0}},setup(e){return(a,s)=>(v(),b(A,null,[st,t("div",{class:y([{"animate-pulse":e.pulse},"mx-auto flex w-full items-center justify-between rounded-md bg-white py-3 px-4 transition sm:px-6"])},[ge(a.$slots,"default",{},()=>[t("section",at,[t("div",nt,[h(r(le),{class:"text-slate-300"})]),ot]),t("section",lt,[t("div",rt,[(v(),b(A,null,q(5,i=>t("div",it,dt)),64))])])])],2)],64))}},vt=J(mt,[["__file","/Users/jason/Documents/Code/sourcery-dashboard/src/components/Goals/SkuTableSkeleton.vue"]]),{runQuery:pt}=K(),{createNotification:Y,removeNotification:ft}=ne(),de=w([]),H=he({loading:!1}),gt=async e=>{H.loading=!0;try{let{id:a}=Y({type:"info",title:"Loading Sales Data",message:"Please do not refresh the page.",autoClose:!1});const s=await pt({section:"sales",action:"getSalesByPeriod",params:e});de.value=s,ft(a),Y({type:"success",title:"Successfully Loaded!",message:"The sales data has successfully loaded.",autoClose:!0,duration:5})}catch(a){console.log(a),Y({type:"error",title:"Yikes!",message:`Something went wrong getting the sales data:
      ${a.message}`,autoClose:!0,duration:5})}finally{H.loading=!1}};function me(){const e=a=>gt(a);return{salesData:d(()=>de.value),getSalesData:e,...be(H)}}const{runQuery:yt}=K(),{salesData:ht}=me(),ve=d(()=>{let e=ht.value.map(s=>s?.asin);return xt({array:e,size:20})}),bt=Ne(async()=>{let e={};for(const[a,s]of ve.value.entries())e={...e,...await wt({identifiers:s,includedData:["images"]})};return e},{lazy:!0}),wt=async e=>{try{return(await yt({section:"amazon/products",action:"getCatalogItems",params:e})).reduce((s,i)=>(s[i.asin]={imgUrl:i?.images?.[0]?.images?.[0]?.link},s),{})}catch(a){console.log(a)}},xt=({array:e,size:a=20})=>{let s=[...Array.from(new Set(e))];return s=s.reduce((i,g,p)=>{const u=Math.floor(p/a);return i[u]=[].concat(i[u]||[],g),i},[]),s};function _t(){return{amazonCatalog:d(()=>bt.value),catalogQueue:d(()=>ve.value)}}const{amazonCatalog:kt}=_t();function St(){const e=w(null),a=d(()=>kt?.value?.[e.value]?.imgUrl);return{setProductAsin:i=>e.value=i,productImage:a}}const $t={class:y(["w-auto whitespace-nowrap px-3 py-4 text-center text-sm text-slate-700"])},Ot={class:"space-y-2"},Ct={class:"group/units flex flex-grow flex-wrap items-center justify-center"},Dt={class:"flex items-center space-x-1"},It={class:"flex flex-grow flex-wrap items-baseline justify-center"},Nt={class:"text-xs text-slate-500"},Tt={__name:"SkuColumn",props:{current:Object,previous:{type:Object,required:!1,default:void 0},goal:{type:[Number,String],required:!1,default:void 0},best:{type:Boolean,required:!1,default:!1}},setup(e){const a=e,s=d(()=>!!(a.best||a.goal&&a.current.quantity<a.goal));return(i,g)=>(v(),b("td",$t,[t("div",Ot,[t("div",Ct,[t("div",Dt,[s.value?(v(),b("span",{key:0,class:y(["h-1.5 w-1.5 items-center rounded-full text-lg transition-all",e.best?"bg-indigo-400":e.goal&&e.current.quantity<e.goal?e.previous&&e.previous.quantity<e.goal?"bg-red-400":"bg-yellow-400":"hidden"])},null,2)):B("",!0),t("span",null,D(r(M).number(e.current.quantity)),1)])]),t("div",It,[t("div",Nt,D(r(M).currency(e.current.revenue)),1)])])]))}},F=J(Tt,[["__file","/Users/jason/Documents/Code/sourcery-dashboard/src/components/Goals/SkuColumn.vue"]]),jt={class:"group mx-1 inline-flex items-center rounded-full border border-slate-200 px-2 py-1 text-xs text-slate-700 transition first:ml-0 last:mr-0"},Jt=t("span",{class:"inline-block h-1.5 w-1.5 rounded-full bg-green-400","aria-hidden":"true"},null,-1),Ut={class:"ml-1 font-medium"},zt={class:"-ml-8 flex opacity-0 transition-all group-hover:ml-1 group-hover:space-x-1 group-hover:opacity-100"},Rt=["href"],At={__name:"TagElement",props:{value:String,link:String},setup(e){const a=async s=>navigator.clipboard.writeText(s);return(s,i)=>(v(),b("span",jt,[Jt,t("span",Ut,D(e.value),1),t("span",zt,[e.link?(v(),b("a",{key:0,href:e.link,target:"_blank"},[h(r(De),{class:"h-4 w-4 text-slate-400 transition hover:text-slate-700 active:rotate-6 active:scale-125"})],8,Rt)):B("",!0),t("a",{href:"#",onClick:i[0]||(i[0]=V(g=>a(e.value),["stop"]))},[h(r(Ie),{class:"h-4 w-4 text-slate-400 transition hover:text-slate-700 active:rotate-6 active:scale-125"})])])]))}},Gt=J(At,[["__file","/Users/jason/Documents/Code/sourcery-dashboard/src/components/Elements/TagElement.vue"]]),Pt={class:"flex items-center"},qt={class:"h-24 w-24 flex-shrink-0"},Bt={class:"h-24 w-24 overflow-hidden rounded-md bg-white p-2 shadow ring-1 ring-black ring-opacity-[.02]"},Lt=["src"],Mt={class:"ml-4"},Qt={class:"font-medium text-slate-900"},Yt={class:y(["w-auto whitespace-nowrap px-3 py-4 text-center text-sm text-slate-500"])},Ft={class:"inline-flex w-full max-w-md rounded-md shadow-sm"},Vt=["name","id"],Et={class:"flex flex-wrap justify-center space-x-2"},Wt={class:"text-xs"},Zt={class:"font-semibold text-slate-900"},Ht={class:"text-xs"},Kt={class:"font-semibold text-slate-900"},Xt=t("span",null," per year",-1),es={__name:"SkuRow",props:{dates:Array,row:Object,index:Number,tableScrolled:Boolean},emits:["updateRevenue"],setup(e,{emit:a}){const s=e,{setGoal:i,setGoalProperties:g,goal:p}=ue(),{timeInterval:u}=ee(),{setProductAsin:c,productImage:U}=St();c(s.row.asin),g({sku:s.row.sku,asin:s.row.asin});const k=U,S=d(()=>s.dates),I=d(()=>s.row.dates),_=d(()=>S.value.map(m=>I.value.find(f=>f[u.value.value]===m[u.value.value]&&f.year===m.year)||{...m,revenue:0,quantity:0})),$=d(()=>(_.value.reduce((m,f)=>m+=f.quantity,0)/_.value.length).toFixed(1)),T=d(()=>(I.value.reduce((m,f)=>m+=f.revenue/f.quantity,0)/I.value.length).toFixed(2)),G=d(()=>T.value*$.value),x=w(0),O=d(()=>x.value*u.value.intervalsPerYear*T.value),o=d(()=>x.value*T.value),l=d(()=>({quantity:$.value,revenue:G.value})),n=d(()=>_.value.reduce((m,f)=>m.quantity>f.quantity?m:f));return we(O,(m,f)=>{a("updateRevenue",m-(f||0))},{immediate:!0}),oe(()=>{x.value=(p.value/u.value.intervalsPerYear).toFixed(0)}),xe(()=>{a("updateRevenue",-O.value)}),(m,f)=>(v(),b("tr",{class:y([e.index%2===0?void 0:"bg-slate-50","divide-x divide-gray-100"])},[t("td",{class:y([e.index%2===0?"bg-white":"bg-slate-50","sticky left-0 z-0 whitespace-nowrap py-4 pl-4 pr-3 text-sm transition-all sm:pl-6",{"border-r-4":e.tableScrolled}])},[t("div",Pt,[t("div",qt,[t("div",Bt,[r(k)?(v(),b("img",{key:0,class:"h-20 w-20 object-contain",src:r(k),alt:""},null,8,Lt)):(v(),N(r(le),{key:1,class:"h-20 w-20 animate-pulse text-slate-200"}))])]),t("div",Mt,[t("div",Qt,D(e.row.sku),1),t("div",null,[e.row.asin?(v(),N(Gt,{key:0,class:y(["text-xs"]),value:e.row.asin,link:`https://sellercentral.amazon.com/skucentral?mSku=${e.row.sku}&ref=myi_skuc`},null,8,["value","link"])):B("",!0)])])])],2),(v(!0),b(A,null,q(_.value,(P,pe)=>(v(),N(F,{current:P,previous:_.value[pe-1],goal:x.value||$.value,best:P===n.value},null,8,["current","previous","goal","best"]))),256)),h(F,{current:n.value,best:!0},null,8,["current"]),h(F,{current:l.value},null,8,["current"]),t("td",Yt,[t("div",Ft,[_e(t("input",{"onUpdate:modelValue":f[0]||(f[0]=P=>x.value=P),type:"number",name:`${e.row.asin}_goal`,id:`${e.row.asin}_goal`,class:"flex-grow rounded-l-md border-gray-300 text-center focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm"},null,8,Vt),[[ke,x.value]]),t("button",{type:"button",class:"-ml-px inline-flex items-center whitespace-nowrap rounded-r-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium leading-4 text-slate-700 hover:bg-slate-50 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 disabled:cursor-not-allowed disabled:opacity-30",onClick:f[1]||(f[1]=P=>r(i)({sku:e.row.sku,asin:e.row.asin,goal:x.value*r(u).intervalsPerYear}))}," Set Goal ")]),t("div",Et,[t("div",Wt,[t("span",Zt,D(r(M).currency(o.value)),1),t("span",null," per "+D(r(u).value),1)]),t("div",Ht,[t("span",Kt,D(r(M).currency(O.value)),1),Xt])])])],2))}},ts=J(es,[["__file","/Users/jason/Documents/Code/sourcery-dashboard/src/components/Goals/SkuRow.vue"]]),ss={class:"flex h-full w-full flex-col"},as={class:"relative z-20 flex w-full items-center justify-between space-x-4"},ns={class:"flex w-1/2 items-center justify-start space-x-4"},os=t("h1",{class:"text-lg font-medium leading-6 text-slate-900"},"Brand Revenue Goals",-1),ls={class:y(["w-72"])},rs={class:"text-lg font-medium leading-6 text-slate-900"},is={key:0,class:"relative min-w-full table-auto border-separate border-spacing-0 divide-y divide-slate-300 ring-1 ring-black ring-opacity-5"},us={class:"bg-slate-50"},cs={class:"divide-x divide-slate-300"},ds=t("th",{scope:"col",class:y(["px-3 py-3.5 text-center text-sm font-semibold text-slate-900","border-b border-slate-300","sticky top-0 bg-slate-50"])}," Best ",-1),ms=t("th",{scope:"col",class:y(["px-3 py-3.5 text-center text-sm font-semibold text-slate-900","border-b border-slate-300","sticky top-0 bg-slate-50"])}," Average ",-1),vs=t("th",{scope:"col",class:y(["px-3 py-3.5 text-center text-sm font-semibold text-slate-900","border-b border-slate-300","sticky top-0 bg-slate-50"])}," Goal ",-1),ps={class:"divide-y divide-slate-200 bg-white"},fs={__name:"SkuTable",setup(e){const a=w(null),{timeInterval:s}=ee(),{getSalesData:i,salesData:g,loading:p}=me(),{presets:u}=ce(),c=w(JSON.parse(u.find(o=>o.name==="This Year").value)),U=({interval:o,year:l})=>{o===0&&(o=52,l=--l);const n=j.fromObject({weekYear:l,weekNumber:o});return`${n.startOf("week").toFormat("MM/dd/yy")}-${n.endOf("week").toFormat("MM/dd/yy")}`},k=({interval:o,year:l})=>`${j.fromObject({month:o,year:l}).startOf("month").toFormat("MMM yyyy")}`,S=({interval:o,year:l})=>s.value.value==="week"?U({interval:o,year:l}):k({interval:o,year:l}),I=d(()=>[{name:"All Brands",value:null},...Array.from(new Set(g.value.map(o=>JSON.stringify({name:o.brand,value:o.brand}))),JSON.parse)]),_=d(()=>g.value.filter(o=>o.brand.includes(a.value||""))),$=d(()=>Array.from(new Set(_.value.reduce((o,l)=>o.concat(l.dates.map(n=>({[s.value.value]:n[s.value.value],year:n.year}))),[]).map(JSON.stringify)),JSON.parse).sort((o,l)=>{const n=m=>`${m.year}${m[s.value.value].toString().padStart(2,0)}`;return n(o)-n(l)}));d(()=>_.value.reduce((o,l)=>(o+=l.dates.map(n=>n.revenue).reduce((n,m)=>n+m),o),0));const T=w(0),G=o=>T.value+=o,x=w(!1),O=o=>x.value=o.target.scrollLeft>0;return oe(()=>{console.log(`Running getSalesData with params: {range: ${c.value}, view: ${s.value.value}}`),i({range:c.value,view:s.value.value})}),(o,l)=>(v(),b("div",ss,[t("div",as,[t("div",ns,[os,t("div",ls,[h(E,{shadow:"","current-option":a.value,"onUpdate:currentOption":l[0]||(l[0]=n=>a.value=n),options:I.value,placeholder:"Filter by brand",disabled:r(p)},null,8,["current-option","options","disabled"])]),t("h1",rs,D(r(M).currency(T.value)),1)]),h(tt,{"initial-range":c.value,"onUpdate:initialRange":[l[1]||(l[1]=n=>c.value=n),l[3]||(l[3]=n=>c.value=n)],view:r(s).value,"onUpdate:view":l[2]||(l[2]=n=>r(s).value=n),disabled:r(p)},null,8,["initial-range","view","disabled"])]),t("div",{class:"relative mt-6 overflow-auto bg-white shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",onScroll:O},[r(p)?(v(),N(vt,{key:1})):(v(),b("table",is,[t("thead",us,[t("tr",cs,[t("th",{scope:"col",class:y(["sticky left-0 top-0 z-10 whitespace-nowrap border-slate-300 bg-slate-50 py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-slate-900 transition-all sm:pl-6","border-b border-slate-300",{"border-r-4":x.value}])}," SKU ",2),(v(!0),b(A,null,q($.value,({[r(s).value]:n,year:m})=>(v(),b("th",{scope:"col",class:y(["whitespace-nowrap px-3 py-3.5 text-center text-sm font-semibold text-slate-900","border-b border-slate-300","sticky top-0 bg-slate-50"]),key:n},D(S({interval:n,year:m})),1))),128)),ds,ms,vs])]),t("tbody",ps,[(v(!0),b(A,null,q(_.value,(n,m)=>(v(),N(ts,{dates:$.value,row:n,index:m,key:`${n.asin}_${n.sku}`,onUpdateRevenue:G,tableScrolled:x.value},null,8,["dates","row","index","tableScrolled"]))),128))])]))],32)]))}},gs=J(fs,[["__file","/Users/jason/Documents/Code/sourcery-dashboard/src/components/Goals/SkuTable.vue"]]),ys={class:"flex h-screen flex-col px-8 pt-24 pb-8"},hs={__name:"GoalsView",setup(e){return ue(),(a,s)=>(v(),b("div",ys,[h(gs)]))}},Ps=J(hs,[["__file","/Users/jason/Documents/Code/sourcery-dashboard/src/views/GoalsView.vue"]]);export{Ps as default};
