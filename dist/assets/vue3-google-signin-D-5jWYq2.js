import{r as a,b as C,d as k,i as x,w as S,e as f,a as E,f as z,g as B,K as T,A as P,o as G,a2 as m}from"./@vue-DfHtGlmf.js";const v=Symbol(),s=a(!1),r=a(!1),h=a(!1),u=a(0);let i=null;const M=()=>{const t=document.createElement("script");return t.src="https://accounts.google.com/gsi/client",t.async=!0,t.defer=!0,t},O=()=>{r.value=!0,i=M(),document.head.appendChild(i),i.onload=()=>{r.value=!1,s.value=!0},i.onerror=()=>{r.value=!1,h.value=!0}};C(()=>u.value,(t,n)=>{t>0&&!s.value&&!r.value&&O()});function L(){return G(()=>{u.value++}),f(()=>{u.value--}),{scriptLoaded:m(s),scriptLoadError:m(h)}}const A=k({__name:"GoogleSignInButton",props:{oneTap:{type:Boolean},autoSelect:{type:Boolean},loginUri:null,cancelOnTapOutside:{type:Boolean},promptParentId:null,nonce:null,context:null,stateCookieDomain:null,uxMode:null,allowedParentOrigin:null,itpSupport:{type:Boolean},type:null,theme:null,size:null,text:null,shape:null,logoAlignment:null,width:null,locale:null},emits:["success","error","intermediateIframeCloseCallback","nativeCallback","promptMomentNotification"],setup(t,{emit:n}){const e=t,w={large:40,medium:32,small:20},y=x(v),d=a(null),{scriptLoaded:I}=L();S(()=>{var l,c,p,g;I.value&&((l=window.google)==null||l.accounts.id.initialize({client_id:y,callback:o=>{if(!o.clientId||!o.credential){n("error");return}n("success",o)},allowed_parent_origin:e.allowedParentOrigin,auto_select:e.autoSelect,cancel_on_tap_outside:e.cancelOnTapOutside,context:e.context,intermediate_iframe_close_callback:()=>{n("intermediateIframeCloseCallback")},itp_support:e.itpSupport,login_uri:e.loginUri,native_callback:o=>{n("nativeCallback",o)},nonce:e.nonce,prompt_parent_id:e.promptParentId,state_cookie_domain:e.stateCookieDomain,ux_mode:e.uxMode}),(p=window.google)==null||p.accounts.id.renderButton(d.value,{type:e.type,theme:e.theme,size:e.size,text:e.text,shape:e.shape,logo_alignment:e.logoAlignment,width:(c=e.width)==null?void 0:c.toString(),locale:e.locale}),e.oneTap&&((g=window.google)==null||g.accounts.id.prompt(o=>{n("promptMomentNotification",o)})))}),f(()=>{var l;e.oneTap&&((l=window.google)==null||l.accounts.id.cancel())});const b=E(()=>w[e.size||"large"]);return(l,c)=>(z(),B("div",{ref_key:"targetElement",ref:d,style:T({display:"inline-flex",height:P(b)})},null,4))}}),N="GoogleSignInPlugin",_=t=>`[${N}]: ${t}`,j={install(t,n){if(!n)throw new Error(_("initialize plugin by passing an options object"));if(!n.clientId||n.clientId&&n.clientId.trim().length===0)throw new Error(_("clientId is required to initialize"));t.provide(v,n.clientId),t.component("GoogleSignInButton",A)}};export{j as p};
