import{q as $,k as E,l as g,v as L,X as x,x as Z,y as T,C,z as ee,D as te,E as oe,G as H,H as W,I as Y,J as X,K as ae,L as M,T as _,F as le,M as U,N as ne,$ as ue,P as J,m as G,O as ie,au as re,R as se,S as N,U as ve,V as de,W as pe,Y as V}from"./index.224dd6bb.js";import{t as be,d as ce,e as fe,f as me,a as xe}from"./micro-task.aff09db7.js";function ge(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Oe(){return/Android/gi.test(window.navigator.userAgent)}function Re(){return ge()||Oe()}function Q(){let o=[],b={addEventListener(l,i,e,t){return l.addEventListener(i,e,t),b.add(()=>l.removeEventListener(i,e,t))},requestAnimationFrame(...l){let i=requestAnimationFrame(...l);b.add(()=>cancelAnimationFrame(i))},nextFrame(...l){b.requestAnimationFrame(()=>{b.requestAnimationFrame(...l)})},setTimeout(...l){let i=setTimeout(...l);b.add(()=>clearTimeout(i))},microTask(...l){let i={current:!0};return be(()=>{i.current&&l[0]()}),b.add(()=>{i.current=!1})},style(l,i,e){let t=l.style.getPropertyValue(i);return Object.assign(l.style,{[i]:e}),this.add(()=>{Object.assign(l.style,{[i]:t})})},group(l){let i=Q();return l(i),this.add(()=>i.dispose())},add(l){return o.push(l),()=>{let i=o.indexOf(l);if(i>=0)for(let e of o.splice(i,1))e()}},dispose(){for(let l of o.splice(0))l()}};return b}function Se(o,b){return o===b}var ye=(o=>(o[o.Open=0]="Open",o[o.Closed=1]="Closed",o))(ye||{}),he=(o=>(o[o.Single=0]="Single",o[o.Multi=1]="Multi",o))(he||{}),Ce=(o=>(o[o.Pointer=0]="Pointer",o[o.Other=1]="Other",o))(Ce||{});let z=Symbol("ComboboxContext");function q(o){let b=de(z,null);if(b===null){let l=new Error(`<${o} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,q),l}return b}let Te=$({name:"Combobox",emits:{"update:modelValue":o=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Se},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(o,{slots:b,attrs:l,emit:i}){let e=E(1),t=E(null),h=E(null),p=E(null),s=E(null),f=E({static:!1,hold:!1}),m=E([]),O=E(null),A=E(1),w=E(!1);function j(n=v=>v){let v=O.value!==null?m.value[O.value]:null,d=pe(n(m.value.slice()),c=>C(c.dataRef.domRef)),u=v?d.indexOf(v):null;return u===-1&&(u=null),{options:d,activeOptionIndex:u}}let k=g(()=>o.multiple?1:0),R=g(()=>o.nullable),[a,S]=ce(g(()=>o.modelValue),n=>i("update:modelValue",n),g(()=>o.defaultValue)),y=g(()=>a.value===void 0?L(k.value,{[1]:[],[0]:void 0}):a.value),F=null,I=null,r={comboboxState:e,value:y,mode:k,compare(n,v){if(typeof o.by=="string"){let d=o.by;return n?.[d]===v?.[d]}return o.by(n,v)},defaultValue:g(()=>o.defaultValue),nullable:R,inputRef:h,labelRef:t,buttonRef:p,optionsRef:s,disabled:g(()=>o.disabled),options:m,change(n){S(n)},activeOptionIndex:g(()=>{if(w.value&&O.value===null&&m.value.length>0){let n=m.value.findIndex(v=>!v.dataRef.disabled);n!==-1&&(O.value=n)}return O.value}),activationTrigger:A,optionsPropsRef:f,closeCombobox(){w.value=!1,!o.disabled&&e.value!==1&&(e.value=1,O.value=null)},openCombobox(){if(w.value=!0,o.disabled||e.value===0)return;let n=m.value.findIndex(v=>{let d=x(v.dataRef.value);return L(k.value,{[0]:()=>r.compare(x(r.value.value),x(d)),[1]:()=>x(r.value.value).some(u=>r.compare(x(u),x(d)))})});n!==-1&&(O.value=n),e.value=0},goToOption(n,v,d){w.value=!1,F!==null&&cancelAnimationFrame(F),F=requestAnimationFrame(()=>{if(o.disabled||s.value&&!f.value.static&&e.value===1)return;let u=j();if(u.activeOptionIndex===null){let P=u.options.findIndex(K=>!K.dataRef.disabled);P!==-1&&(u.activeOptionIndex=P)}let c=Z(n===T.Specific?{focus:T.Specific,id:v}:{focus:n},{resolveItems:()=>u.options,resolveActiveIndex:()=>u.activeOptionIndex,resolveId:P=>P.id,resolveDisabled:P=>P.dataRef.disabled});O.value=c,A.value=d??1,m.value=u.options})},selectOption(n){let v=m.value.find(u=>u.id===n);if(!v)return;let{dataRef:d}=v;S(L(k.value,{[0]:()=>d.value,[1]:()=>{let u=x(r.value.value).slice(),c=x(d.value),P=u.findIndex(K=>r.compare(c,x(K)));return P===-1?u.push(c):u.splice(P,1),u}}))},selectActiveOption(){if(r.activeOptionIndex.value===null)return;let{dataRef:n,id:v}=m.value[r.activeOptionIndex.value];S(L(k.value,{[0]:()=>n.value,[1]:()=>{let d=x(r.value.value).slice(),u=x(n.value),c=d.findIndex(P=>r.compare(u,x(P)));return c===-1?d.push(u):d.splice(c,1),d}})),r.goToOption(T.Specific,v)},registerOption(n,v){I&&cancelAnimationFrame(I);let d={id:n,dataRef:v},u=j(c=>(c.push(d),c));if(O.value===null){let c=v.value.value;L(k.value,{[0]:()=>r.compare(x(r.value.value),x(c)),[1]:()=>x(r.value.value).some(P=>r.compare(x(P),x(c)))})&&(u.activeOptionIndex=u.options.indexOf(d))}m.value=u.options,O.value=u.activeOptionIndex,A.value=1,u.options.some(c=>!C(c.dataRef.domRef))&&(I=requestAnimationFrame(()=>{let c=j();m.value=c.options,O.value=c.activeOptionIndex}))},unregisterOption(n){var v;r.activeOptionIndex.value!==null&&((v=r.options.value[r.activeOptionIndex.value])==null?void 0:v.id)===n&&(w.value=!0);let d=j(u=>{let c=u.findIndex(P=>P.id===n);return c!==-1&&u.splice(c,1),u});m.value=d.options,O.value=d.activeOptionIndex,A.value=1}};ee([h,p,s],()=>r.closeCombobox(),g(()=>e.value===0)),te(z,r),oe(g(()=>L(e.value,{[0]:H.Open,[1]:H.Closed})));let D=g(()=>r.activeOptionIndex.value===null?null:m.value[r.activeOptionIndex.value].dataRef.value),B=g(()=>{var n;return(n=C(h))==null?void 0:n.closest("form")});return W(()=>{Y([B],()=>{if(!B.value||o.defaultValue===void 0)return;function n(){r.change(o.defaultValue)}return B.value.addEventListener("reset",n),()=>{var v;(v=B.value)==null||v.removeEventListener("reset",n)}},{immediate:!0})}),()=>{let{name:n,disabled:v,form:d,...u}=o,c={open:e.value===0,disabled:v,activeIndex:r.activeOptionIndex.value,activeOption:D.value,value:y.value};return X(le,[...n!=null&&y.value!=null?fe({[n]:y.value}).map(([P,K])=>X(me,ae({features:xe.Hidden,key:P,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:d,name:P,value:K}))):[],M({theirProps:{...l,..._(u,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:c,slots:b,attrs:l,name:"Combobox"})])}}}),Ae=$({name:"ComboboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:()=>`headlessui-combobox-label-${U()}`}},setup(o,{attrs:b,slots:l}){let i=q("ComboboxLabel");function e(){var t;(t=C(i.inputRef))==null||t.focus({preventScroll:!0})}return()=>{let t={open:i.comboboxState.value===0,disabled:i.disabled.value},{id:h,...p}=o,s={id:h,ref:i.labelRef,onClick:e};return M({ourProps:s,theirProps:p,slot:t,attrs:b,slots:l,name:"ComboboxLabel"})}}}),we=$({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${U()}`}},setup(o,{attrs:b,slots:l,expose:i}){let e=q("ComboboxButton");i({el:e.buttonRef,$el:e.buttonRef});function t(s){e.disabled.value||(e.comboboxState.value===0?e.closeCombobox():(s.preventDefault(),e.openCombobox()),N(()=>{var f;return(f=C(e.inputRef))==null?void 0:f.focus({preventScroll:!0})}))}function h(s){switch(s.key){case V.ArrowDown:s.preventDefault(),s.stopPropagation(),e.comboboxState.value===1&&e.openCombobox(),N(()=>{var f;return(f=e.inputRef.value)==null?void 0:f.focus({preventScroll:!0})});return;case V.ArrowUp:s.preventDefault(),s.stopPropagation(),e.comboboxState.value===1&&(e.openCombobox(),N(()=>{e.value.value||e.goToOption(T.Last)})),N(()=>{var f;return(f=e.inputRef.value)==null?void 0:f.focus({preventScroll:!0})});return;case V.Escape:if(e.comboboxState.value!==0)return;s.preventDefault(),e.optionsRef.value&&!e.optionsPropsRef.value.static&&s.stopPropagation(),e.closeCombobox(),N(()=>{var f;return(f=e.inputRef.value)==null?void 0:f.focus({preventScroll:!0})});return}}let p=ne(g(()=>({as:o.as,type:b.type})),e.buttonRef);return()=>{var s,f;let m={open:e.comboboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:O,...A}=o,w={ref:e.buttonRef,id:O,type:p.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(s=C(e.optionsRef))==null?void 0:s.id,"aria-expanded":e.comboboxState.value===0,"aria-labelledby":e.labelRef.value?[(f=C(e.labelRef))==null?void 0:f.id,O].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:h,onClick:t};return M({ourProps:w,theirProps:A,slot:m,attrs:b,slots:l,name:"ComboboxButton"})}}}),Fe=$({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${U()}`}},emits:{change:o=>!0},setup(o,{emit:b,attrs:l,slots:i,expose:e}){let t=q("ComboboxInput"),h=g(()=>ue(C(t.inputRef))),p={value:!1};e({el:t.inputRef,$el:t.inputRef});function s(){t.change(null);let a=C(t.optionsRef);a&&(a.scrollTop=0),t.goToOption(T.Nothing)}let f=g(()=>{var a;let S=t.value.value;return C(t.inputRef)?typeof o.displayValue<"u"&&S!==void 0?(a=o.displayValue(S))!=null?a:"":typeof S=="string"?S:"":""});W(()=>{Y([f,t.comboboxState,h],([a,S],[y,F])=>{if(p.value)return;let I=C(t.inputRef);I&&((F===0&&S===1||a!==y)&&(I.value=a),requestAnimationFrame(()=>{var r;if(p.value||!I||((r=h.value)==null?void 0:r.activeElement)!==I)return;let{selectionStart:D,selectionEnd:B}=I;Math.abs((B??0)-(D??0))===0&&D===0&&I.setSelectionRange(I.value.length,I.value.length)}))},{immediate:!0}),Y([t.comboboxState],([a],[S])=>{if(a===0&&S===1){if(p.value)return;let y=C(t.inputRef);if(!y)return;let F=y.value,{selectionStart:I,selectionEnd:r,selectionDirection:D}=y;y.value="",y.value=F,D!==null?y.setSelectionRange(I,r,D):y.setSelectionRange(I,r)}})});let m=E(!1);function O(){m.value=!0}function A(){Q().nextFrame(()=>{m.value=!1})}function w(a){switch(p.value=!0,a.key){case V.Enter:if(p.value=!1,t.comboboxState.value!==0||m.value)return;if(a.preventDefault(),a.stopPropagation(),t.activeOptionIndex.value===null){t.closeCombobox();return}t.selectActiveOption(),t.mode.value===0&&t.closeCombobox();break;case V.ArrowDown:return p.value=!1,a.preventDefault(),a.stopPropagation(),L(t.comboboxState.value,{[0]:()=>t.goToOption(T.Next),[1]:()=>t.openCombobox()});case V.ArrowUp:return p.value=!1,a.preventDefault(),a.stopPropagation(),L(t.comboboxState.value,{[0]:()=>t.goToOption(T.Previous),[1]:()=>{t.openCombobox(),N(()=>{t.value.value||t.goToOption(T.Last)})}});case V.Home:if(a.shiftKey)break;return p.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(T.First);case V.PageUp:return p.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(T.First);case V.End:if(a.shiftKey)break;return p.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(T.Last);case V.PageDown:return p.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(T.Last);case V.Escape:if(p.value=!1,t.comboboxState.value!==0)return;a.preventDefault(),t.optionsRef.value&&!t.optionsPropsRef.value.static&&a.stopPropagation(),t.nullable.value&&t.mode.value===0&&t.value.value===null&&s(),t.closeCombobox();break;case V.Tab:if(p.value=!1,t.comboboxState.value!==0)return;t.mode.value===0&&t.selectActiveOption(),t.closeCombobox();break}}function j(a){b("change",a),t.nullable.value&&t.mode.value===0&&a.target.value===""&&s(),t.openCombobox()}function k(){p.value=!1}let R=g(()=>{var a,S,y,F;return(F=(y=(S=o.defaultValue)!=null?S:t.defaultValue.value!==void 0?(a=o.displayValue)==null?void 0:a.call(o,t.defaultValue.value):null)!=null?y:t.defaultValue.value)!=null?F:""});return()=>{var a,S,y,F,I,r;let D={open:t.comboboxState.value===0},{id:B,displayValue:n,onChange:v,...d}=o,u={"aria-controls":(a=t.optionsRef.value)==null?void 0:a.id,"aria-expanded":t.comboboxState.value===0,"aria-activedescendant":t.activeOptionIndex.value===null||(S=t.options.value[t.activeOptionIndex.value])==null?void 0:S.id,"aria-labelledby":(I=(y=C(t.labelRef))==null?void 0:y.id)!=null?I:(F=C(t.buttonRef))==null?void 0:F.id,"aria-autocomplete":"list",id:B,onCompositionstart:O,onCompositionend:A,onKeydown:w,onInput:j,onBlur:k,role:"combobox",type:(r=l.type)!=null?r:"text",tabIndex:0,ref:t.inputRef,defaultValue:R.value,disabled:t.disabled.value===!0?!0:void 0};return M({ourProps:u,theirProps:d,slot:D,attrs:l,slots:i,features:J.RenderStrategy|J.Static,name:"ComboboxInput"})}}}),Ee=$({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(o,{attrs:b,slots:l,expose:i}){let e=q("ComboboxOptions"),t=`headlessui-combobox-options-${U()}`;i({el:e.optionsRef,$el:e.optionsRef}),G(()=>{e.optionsPropsRef.value.static=o.static}),G(()=>{e.optionsPropsRef.value.hold=o.hold});let h=ie(),p=g(()=>h!==null?(h.value&H.Open)===H.Open:e.comboboxState.value===0);return re({container:g(()=>C(e.optionsRef)),enabled:g(()=>e.comboboxState.value===0),accept(s){return s.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:s.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(s){s.setAttribute("role","none")}}),()=>{var s,f,m;let O={open:e.comboboxState.value===0},A={"aria-labelledby":(m=(s=C(e.labelRef))==null?void 0:s.id)!=null?m:(f=C(e.buttonRef))==null?void 0:f.id,id:t,ref:e.optionsRef,role:"listbox","aria-multiselectable":e.mode.value===1?!0:void 0},w=_(o,["hold"]);return M({ourProps:A,theirProps:w,slot:O,attrs:b,slots:l,features:J.RenderStrategy|J.Static,visible:p.value,name:"ComboboxOptions"})}}}),Ve=$({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(o,{slots:b,attrs:l,expose:i}){let e=q("ComboboxOption"),t=`headlessui-combobox-option-${U()}`,h=E(null);i({el:h,$el:h});let p=g(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t:!1),s=g(()=>L(e.mode.value,{[0]:()=>e.compare(x(e.value.value),x(o.value)),[1]:()=>x(e.value.value).some(R=>e.compare(x(R),x(o.value)))})),f=g(()=>({disabled:o.disabled,value:o.value,domRef:h}));W(()=>e.registerOption(t,f)),se(()=>e.unregisterOption(t)),G(()=>{e.comboboxState.value===0&&p.value&&e.activationTrigger.value!==0&&N(()=>{var R,a;return(a=(R=C(h))==null?void 0:R.scrollIntoView)==null?void 0:a.call(R,{block:"nearest"})})});function m(R){if(o.disabled)return R.preventDefault();e.selectOption(t),e.mode.value===0&&e.closeCombobox(),Re()||requestAnimationFrame(()=>{var a;return(a=C(e.inputRef))==null?void 0:a.focus()})}function O(){if(o.disabled)return e.goToOption(T.Nothing);e.goToOption(T.Specific,t)}let A=ve();function w(R){A.update(R)}function j(R){A.wasMoved(R)&&(o.disabled||p.value||e.goToOption(T.Specific,t,0))}function k(R){A.wasMoved(R)&&(o.disabled||p.value&&(e.optionsPropsRef.value.hold||e.goToOption(T.Nothing)))}return()=>{let{disabled:R}=o,a={active:p.value,selected:s.value,disabled:R},S={id:t,ref:h,role:"option",tabIndex:R===!0?void 0:-1,"aria-disabled":R===!0?!0:void 0,"aria-selected":s.value,disabled:void 0,onClick:m,onFocus:O,onPointerenter:w,onMouseenter:w,onPointermove:j,onMousemove:j,onPointerleave:k,onMouseleave:k};return M({ourProps:S,theirProps:o,slot:a,attrs:l,slots:b,name:"ComboboxOption"})}}});export{we as G,Te as J,Fe as Q,Ae as W,Ee as X,Ve as Y};
